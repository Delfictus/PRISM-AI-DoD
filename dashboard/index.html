<!DOCTYPE html>
<html lang="en" class="bg-gray-900">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISM-AI: Advanced Protein Engineering Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <!-- Mol* Viewer for 3D visualization -->
    <link rel="stylesheet" type="text/css" href="https://molstar.org/viewer/molstar.css" />
    <script type="text/javascript" src="https://molstar.org/viewer/molstar.js"></script>
    <!-- Chart.js for metrics visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        .gpu-bar {
            background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
            transition: width 0.3s ease;
        }
        .quantum-glow {
            animation: quantumPulse 2s infinite;
        }
        @keyframes quantumPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
            50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.8); }
        }
        .advantage-metric {
            border-left: 3px solid #22c55e;
            padding-left: 12px;
        }
        .disadvantage-metric {
            border-left: 3px solid #ef4444;
            padding-left: 12px;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .metric-card {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151;
        }
        .winner-highlight {
            background: linear-gradient(135deg, #064e3b 0%, #022c22 100%);
            border: 2px solid #22c55e;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 min-h-screen flex flex-col">

    <!-- Advanced Header with Real-time Metrics -->
    <header class="bg-gray-900/90 backdrop-blur-sm border-b border-gray-700 p-3 sticky top-0 z-50">
        <div class="flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <svg class="w-10 h-10 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                </svg>
                <div>
                    <h1 class="text-2xl font-bold text-white">PRISM-AI Platform</h1>
                    <p class="text-xs text-gray-400">Next-Gen Protein Engineering & Drug Discovery</p>
                </div>
            </div>

            <!-- Real-time System Metrics -->
            <div class="flex space-x-6">
                <div class="text-right">
                    <div class="text-xs text-gray-400">GPU Utilization</div>
                    <div class="flex items-center space-x-2">
                        <div class="w-32 h-2 bg-gray-700 rounded-full overflow-hidden">
                            <div id="gpu-bar" class="gpu-bar h-full" style="width: 0%"></div>
                        </div>
                        <span id="gpu-percent" class="text-sm font-mono">0%</span>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-xs text-gray-400">Quantum Coherence</div>
                    <span id="quantum-score" class="text-sm font-bold text-purple-400">0.00</span>
                </div>
                <div class="text-right">
                    <div class="text-xs text-gray-400">API Status</div>
                    <span id="api-status" class="text-sm font-bold text-green-400">Connected</span>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow flex p-4 gap-4">
        <!-- Enhanced Control Panel -->
        <aside class="w-1/3 flex flex-col gap-4">
            <!-- Mode Selection -->
            <div class="bg-gray-800/50 rounded-lg border border-gray-700 p-4">
                <h2 class="text-lg font-bold mb-3">Competition Mode</h2>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setMode('benchmark')" class="mode-btn bg-blue-600 text-white py-2 px-3 rounded text-sm font-semibold hover:bg-blue-700 transition">
                        Benchmark
                    </button>
                    <button onclick="setMode('discovery')" class="mode-btn bg-gray-700 text-gray-300 py-2 px-3 rounded text-sm font-semibold hover:bg-gray-600 transition">
                        Discovery
                    </button>
                    <button onclick="setMode('validation')" class="mode-btn bg-gray-700 text-gray-300 py-2 px-3 rounded text-sm font-semibold hover:bg-gray-600 transition">
                        Validation
                    </button>
                </div>
            </div>

            <!-- Benchmark Panel -->
            <div id="benchmark-panel" class="flex-grow bg-gray-800/50 rounded-lg border border-gray-700 p-4">
                <h3 class="text-lg font-bold mb-2">PRISM vs AlphaFold2 Benchmark</h3>
                <p class="text-xs text-gray-400 mb-4">Live head-to-head comparison on blind CASP targets</p>

                <div class="space-y-3">
                    <div>
                        <label class="text-sm font-semibold block mb-2">Select CASP Target</label>
                        <select id="casp-select" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm">
                            <option value="">Loading targets...</option>
                        </select>
                    </div>

                    <!-- Advanced Options -->
                    <div class="border-t border-gray-600 pt-3">
                        <h4 class="text-sm font-semibold mb-2">PRISM-AI Advantages</h4>
                        <div class="space-y-2">
                            <label class="flex items-center text-xs">
                                <input type="checkbox" checked class="mr-2 accent-purple-500">
                                <span>Quantum Annealing (Unique to PRISM)</span>
                            </label>
                            <label class="flex items-center text-xs">
                                <input type="checkbox" checked class="mr-2 accent-purple-500">
                                <span>Thermodynamic Ensemble</span>
                            </label>
                            <label class="flex items-center text-xs">
                                <input type="checkbox" checked class="mr-2 accent-purple-500">
                                <span>Causal Manifold Discovery</span>
                            </label>
                            <label class="flex items-center text-xs">
                                <input type="checkbox" checked class="mr-2 accent-purple-500">
                                <span>GPU Acceleration (CUDA 12.8)</span>
                            </label>
                        </div>
                    </div>

                    <button id="start-benchmark" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:from-purple-700 hover:to-blue-700 transition">
                        Start Benchmark
                    </button>
                </div>
            </div>

            <!-- Discovery Panel (hidden) -->
            <div id="discovery-panel" class="hidden flex-grow bg-gray-800/50 rounded-lg border border-gray-700 p-4">
                <h3 class="text-lg font-bold mb-2">Drug Discovery Engine</h3>
                <p class="text-xs text-gray-400 mb-4">Active Inference-powered molecular generation</p>

                <div class="space-y-3">
                    <div>
                        <label class="text-sm font-semibold block mb-2">Target Protein (PDB)</label>
                        <input type="text" id="target-pdb" placeholder="e.g., 6Y2E" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm">
                    </div>

                    <div>
                        <label class="text-sm font-semibold block mb-2">Generation Strategy</label>
                        <select class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm">
                            <option>Active Inference (CMA-ES)</option>
                            <option>Quantum-Guided Search</option>
                            <option>Thermodynamic Optimization</option>
                        </select>
                    </div>

                    <button id="start-discovery" class="w-full bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-4 rounded-lg hover:from-green-700 hover:to-teal-700 transition">
                        Generate Novel Drugs
                    </button>
                </div>
            </div>

            <!-- Validation Panel (hidden) -->
            <div id="validation-panel" class="hidden flex-grow bg-gray-800/50 rounded-lg border border-gray-700 p-4">
                <h3 class="text-lg font-bold mb-2">Cross-Validation Suite</h3>
                <p class="text-xs text-gray-400 mb-4">Validate predictions against experimental data</p>

                <div class="space-y-3">
                    <button class="w-full bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold py-3 px-4 rounded-lg hover:from-orange-700 hover:to-red-700 transition">
                        Run Validation Suite
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Visualization Area -->
        <section class="w-2/3 flex flex-col gap-4">
            <!-- Comparison Metrics Dashboard -->
            <div class="bg-gray-800/50 rounded-lg border border-gray-700 p-4">
                <h3 class="text-lg font-bold mb-3">Performance Metrics</h3>
                <div class="grid grid-cols-4 gap-3">
                    <div class="metric-card p-3 rounded-lg">
                        <div class="text-xs text-gray-400">Fold Time</div>
                        <div class="flex items-baseline space-x-2 mt-1">
                            <span class="text-xl font-bold text-green-400" id="prism-time">--</span>
                            <span class="text-xs text-gray-500">vs</span>
                            <span class="text-lg text-gray-400" id="af-time">--</span>
                        </div>
                    </div>
                    <div class="metric-card p-3 rounded-lg">
                        <div class="text-xs text-gray-400">TM-Score</div>
                        <div class="flex items-baseline space-x-2 mt-1">
                            <span class="text-xl font-bold text-blue-400" id="prism-tm">--</span>
                            <span class="text-xs text-gray-500">vs</span>
                            <span class="text-lg text-gray-400" id="af-tm">--</span>
                        </div>
                    </div>
                    <div class="metric-card p-3 rounded-lg quantum-glow">
                        <div class="text-xs text-gray-400">Quantum Score</div>
                        <div class="text-xl font-bold text-purple-400" id="quantum-metric">--</div>
                        <div class="text-xs text-green-400">PRISM Exclusive</div>
                    </div>
                    <div class="metric-card p-3 rounded-lg">
                        <div class="text-xs text-gray-400">Energy Stability</div>
                        <div class="text-xl font-bold text-cyan-400" id="energy-metric">--</div>
                        <div class="text-xs text-green-400">PRISM Exclusive</div>
                    </div>
                </div>
            </div>

            <!-- 3D Structure Viewer -->
            <div class="flex-grow bg-gray-900 rounded-lg border border-gray-700 relative">
                <div class="absolute top-2 left-2 z-10 bg-gray-800/90 rounded px-3 py-1">
                    <span class="text-xs font-semibold" id="viewer-label">Awaiting Structure</span>
                </div>
                <div id="mol-viewer" class="w-full h-full"></div>
            </div>

            <!-- Live Comparison Chart -->
            <div class="bg-gray-800/50 rounded-lg border border-gray-700 p-4 h-48">
                <canvas id="comparison-chart"></canvas>
            </div>
        </section>
    </main>

    <!-- Results Modal -->
    <div id="results-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 border border-gray-600">
            <h2 class="text-2xl font-bold mb-4">Benchmark Results</h2>
            <div id="results-content" class="space-y-4">
                <!-- Results will be inserted here -->
            </div>
            <button onclick="closeResults()" class="mt-4 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                Close
            </button>
        </div>
    </div>

    <script>
        // API Configuration
        const API_URL = 'http://localhost:8000';
        let ws = null;
        let currentMode = 'benchmark';
        let currentJobId = null;
        let comparisonChart = null;

        // Initialize WebSocket connection
        function initWebSocket() {
            ws = new WebSocket(`ws://localhost:8000/ws`);

            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'job_update') {
                    updateJobStatus(data);
                }
            };

            ws.onerror = () => {
                document.getElementById('api-status').textContent = 'Disconnected';
                document.getElementById('api-status').className = 'text-sm font-bold text-red-400';
            };

            ws.onopen = () => {
                document.getElementById('api-status').textContent = 'Connected';
                document.getElementById('api-status').className = 'text-sm font-bold text-green-400';
            };
        }

        // Initialize 3D viewer
        async function initMolViewer() {
            const container = document.getElementById('mol-viewer');
            window.viewer = await molstar.Viewer.create(container, {
                layoutIsExpanded: false,
                layoutShowControls: false,
                viewportShowExpand: false,
            });
        }

        // Load structure into viewer
        async function loadStructure(pdbData, label = 'Structure') {
            if (!window.viewer) return;

            await window.viewer.plugin.clear();
            const data = await window.viewer.plugin.builders.data.rawData({ data: pdbData });
            const trajectory = await window.viewer.plugin.builders.structure.parseTrajectory(data, 'pdb');
            await window.viewer.plugin.builders.structure.hierarchy.applyPreset(trajectory, 'default');

            document.getElementById('viewer-label').textContent = label;
        }

        // Initialize comparison chart
        function initComparisonChart() {
            const ctx = document.getElementById('comparison-chart').getContext('2d');
            comparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Speed', 'Accuracy', 'Quantum Score', 'Stability', 'GPU Efficiency'],
                    datasets: [{
                        label: 'PRISM-AI',
                        data: [0, 0, 0, 0, 0],
                        backgroundColor: 'rgba(139, 92, 246, 0.8)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 1
                    }, {
                        label: 'AlphaFold2',
                        data: [0, 0, 0, 0, 0],
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e5e7eb' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: { color: '#374151' },
                            ticks: { color: '#9ca3af' }
                        },
                        x: {
                            grid: { color: '#374151' },
                            ticks: { color: '#9ca3af' }
                        }
                    }
                }
            });
        }

        // Update metrics display
        function updateMetrics(data) {
            // Update GPU utilization
            const gpuPercent = data.gpu_utilization || 0;
            document.getElementById('gpu-bar').style.width = gpuPercent + '%';
            document.getElementById('gpu-percent').textContent = gpuPercent.toFixed(1) + '%';

            // Update quantum score
            document.getElementById('quantum-score').textContent = (data.quantum_coherence_score || 0).toFixed(2);

            // Update comparison metrics if available
            if (data.prism_results) {
                document.getElementById('prism-time').textContent = data.prism_results.fold_time.toFixed(1) + 's';
                document.getElementById('prism-tm').textContent = data.prism_results.tm_score.toFixed(3);
                document.getElementById('quantum-metric').textContent = data.prism_results.quantum_coherence.toFixed(2);
                document.getElementById('energy-metric').textContent = data.prism_results.thermodynamic_stability.toFixed(1);
            }

            if (data.alphafold_results) {
                document.getElementById('af-time').textContent = data.alphafold_results.fold_time.toFixed(1) + 's';
                document.getElementById('af-tm').textContent = data.alphafold_results.tm_score.toFixed(3);
            }

            // Update comparison chart
            if (data.prism_results && data.alphafold_results) {
                updateComparisonChart(data);
            }
        }

        // Update comparison chart with results
        function updateComparisonChart(data) {
            if (!comparisonChart) return;

            const prismSpeed = 100 - (data.prism_results.fold_time / 30 * 100);
            const afSpeed = 100 - (data.alphafold_results.fold_time / 30 * 100);

            comparisonChart.data.datasets[0].data = [
                prismSpeed,
                data.prism_results.tm_score * 100,
                data.prism_results.quantum_coherence * 100,
                Math.abs(data.prism_results.thermodynamic_stability) / 5,
                data.prism_results.gpu_utilization
            ];

            comparisonChart.data.datasets[1].data = [
                afSpeed,
                data.alphafold_results.tm_score * 100,
                0, // No quantum score for AlphaFold
                0, // No thermodynamic stability for AlphaFold
                0  // No GPU metrics for AlphaFold
            ];

            comparisonChart.update();
        }

        // Load CASP targets
        async function loadCaspTargets() {
            try {
                const response = await fetch(`${API_URL}/api/casp_targets`);
                const targets = await response.json();

                const select = document.getElementById('casp-select');
                select.innerHTML = '<option value="">Select a target...</option>';

                targets.forEach(target => {
                    const option = document.createElement('option');
                    option.value = target.id;
                    option.textContent = `${target.id}: ${target.name} (${target.difficulty})`;
                    option.dataset.sequence = target.sequence;
                    select.appendChild(option);
                });
            } catch (error) {
                console.error('Failed to load CASP targets:', error);
            }
        }

        // Start benchmark
        async function startBenchmark() {
            const select = document.getElementById('casp-select');
            const targetId = select.value;

            if (!targetId) {
                alert('Please select a CASP target');
                return;
            }

            const sequence = select.options[select.selectedIndex].dataset.sequence;

            document.getElementById('start-benchmark').disabled = true;
            document.getElementById('start-benchmark').textContent = 'Running...';

            try {
                const response = await fetch(`${API_URL}/api/fold`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        sequence: sequence,
                        target_id: targetId,
                        compare_with_alphafold: true,
                        use_quantum_annealing: true,
                        use_thermodynamic_ensemble: true,
                        gpu_acceleration: true
                    })
                });

                const result = await response.json();
                currentJobId = result.job_id;

                // Start polling for results
                pollJobStatus(currentJobId);

            } catch (error) {
                console.error('Failed to start benchmark:', error);
                alert('Failed to start benchmark. Check console for details.');
            }
        }

        // Poll job status
        async function pollJobStatus(jobId) {
            try {
                const response = await fetch(`${API_URL}/api/job/${jobId}`);
                const job = await response.json();

                if (job.status === 'completed') {
                    displayResults(job);
                    document.getElementById('start-benchmark').disabled = false;
                    document.getElementById('start-benchmark').textContent = 'Start Benchmark';
                } else if (job.status === 'failed') {
                    alert('Job failed: ' + job.error);
                    document.getElementById('start-benchmark').disabled = false;
                    document.getElementById('start-benchmark').textContent = 'Start Benchmark';
                } else {
                    // Update status and continue polling
                    updateJobStatus(job);
                    setTimeout(() => pollJobStatus(jobId), 1000);
                }
            } catch (error) {
                console.error('Failed to poll job status:', error);
            }
        }

        // Update job status display
        function updateJobStatus(job) {
            // Update viewer label with current stage
            if (job.stage) {
                document.getElementById('viewer-label').textContent = job.stage;
            }
        }

        // Display results
        function displayResults(job) {
            if (job.results) {
                updateMetrics({
                    gpu_utilization: job.results.gpu_utilization,
                    quantum_coherence_score: job.results.quantum_coherence,
                    prism_results: job.results,
                    alphafold_results: job.alphafold_results
                });

                // Load structure into viewer
                if (job.results.pdb) {
                    loadStructure(job.results.pdb, 'PRISM-AI Prediction');
                }

                // Show results modal
                showResultsModal(job);
            }
        }

        // Show results modal
        function showResultsModal(job) {
            const modal = document.getElementById('results-modal');
            const content = document.getElementById('results-content');

            const prismWins = job.results.tm_score > (job.alphafold_results?.tm_score || 0);

            content.innerHTML = `
                <div class="grid grid-cols-2 gap-4">
                    <div class="${prismWins ? 'winner-highlight' : ''} p-4 rounded-lg">
                        <h3 class="text-lg font-bold ${prismWins ? 'text-green-400' : ''}">
                            ${prismWins ? '🏆 ' : ''}PRISM-AI
                        </h3>
                        <div class="mt-2 space-y-2 text-sm">
                            <div class="advantage-metric">
                                <strong>TM-Score:</strong> ${job.results.tm_score.toFixed(3)}
                            </div>
                            <div class="advantage-metric">
                                <strong>Time:</strong> ${job.results.fold_time.toFixed(1)}s
                            </div>
                            <div class="advantage-metric">
                                <strong>Quantum Coherence:</strong> ${job.results.quantum_coherence.toFixed(2)}
                            </div>
                            <div class="advantage-metric">
                                <strong>Energy:</strong> ${job.results.thermodynamic_stability.toFixed(1)} kcal/mol
                            </div>
                            <div class="advantage-metric">
                                <strong>GPU Utilization:</strong> ${job.results.gpu_utilization.toFixed(1)}%
                            </div>
                        </div>
                    </div>

                    <div class="${!prismWins ? 'winner-highlight' : ''} p-4 rounded-lg">
                        <h3 class="text-lg font-bold ${!prismWins ? 'text-green-400' : ''}">
                            ${!prismWins ? '🏆 ' : ''}AlphaFold2
                        </h3>
                        <div class="mt-2 space-y-2 text-sm">
                            <div>
                                <strong>TM-Score:</strong> ${job.alphafold_results?.tm_score?.toFixed(3) || 'N/A'}
                            </div>
                            <div>
                                <strong>Time:</strong> ${job.alphafold_results?.fold_time?.toFixed(1) || 'N/A'}s
                            </div>
                            <div class="text-gray-500">
                                <strong>Quantum Coherence:</strong> Not Available
                            </div>
                            <div class="text-gray-500">
                                <strong>Energy:</strong> Not Available
                            </div>
                            <div class="text-gray-500">
                                <strong>GPU Utilization:</strong> Not Reported
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4 p-4 bg-gray-700/50 rounded-lg">
                    <h4 class="font-bold mb-2">PRISM-AI Unique Advantages:</h4>
                    <ul class="text-sm space-y-1 text-green-400">
                        <li>✓ Quantum annealing for global optimization</li>
                        <li>✓ Thermodynamic ensemble modeling</li>
                        <li>✓ ${Math.abs(job.results.fold_time - (job.alphafold_results?.fold_time || 30)).toFixed(1)}s faster folding</li>
                        <li>✓ Energy landscape analysis</li>
                        <li>✓ GPU-accelerated computation</li>
                    </ul>
                </div>
            `;

            modal.classList.remove('hidden');
        }

        // Close results modal
        function closeResults() {
            document.getElementById('results-modal').classList.add('hidden');
        }

        // Set mode
        function setMode(mode) {
            currentMode = mode;

            // Update button styles
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.className = 'mode-btn bg-gray-700 text-gray-300 py-2 px-3 rounded text-sm font-semibold hover:bg-gray-600 transition';
            });
            event.target.className = 'mode-btn bg-blue-600 text-white py-2 px-3 rounded text-sm font-semibold hover:bg-blue-700 transition';

            // Show/hide panels
            document.getElementById('benchmark-panel').classList.toggle('hidden', mode !== 'benchmark');
            document.getElementById('discovery-panel').classList.toggle('hidden', mode !== 'discovery');
            document.getElementById('validation-panel').classList.toggle('hidden', mode !== 'validation');
        }

        // Periodic metrics update
        async function updateSystemMetrics() {
            try {
                const response = await fetch(`${API_URL}/api/metrics`);
                const metrics = await response.json();
                updateMetrics(metrics);
            } catch (error) {
                console.error('Failed to update metrics:', error);
            }
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', async () => {
            initWebSocket();
            await initMolViewer();
            initComparisonChart();
            await loadCaspTargets();

            // Set up event handlers
            document.getElementById('start-benchmark').addEventListener('click', startBenchmark);

            // Start metrics polling
            setInterval(updateSystemMetrics, 2000);
        });
    </script>
</body>
</html>